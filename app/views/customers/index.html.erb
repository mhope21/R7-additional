

<div id="customers">
  
  <h1 class="text-center text-decoration-underline">Customers</h1>

<%= link_to 'New Customer', new_customer_path, class: "btn btn-primary mt-3" %>

<table class="table table-bordered mt-5">
  <thead>
    <tr>
      <th scope="col">Customer ID</th>
      <th scope="col">Full Name</th>
      <th scope="col">Number of Orders</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @customers.each do |customer| %>
      <tr>
        <th scope="row"><%= customer.id %></th>
        <td><%= customer.full_name %></td>
        <td><%= customer.orders.count %></td>
        <td>
          <div class="btn-group">
          <%= link_to 'Show Customer', customer_path(customer), class: "btn btn-primary active", aria: { current: "page"} %>
          <%= link_to 'Show Customer Orders', orders_customer_path(customer), class: "btn btn-primary" %>
          <%= link_to 'Edit', edit_customer_path(customer), class: "btn btn-primary" %>
          <button type="button" class="btn btn-danger"
  data-bs-toggle="modal"
  data-bs-target="#deleteCustomerModal"
  data-bs-customer-id="<%= customer.id %>"
  data-bs-customer-name="<%= customer.full_name %>">
  Delete
</button>
          </div>
        </td>
      </tr>
      
    <% end %>
  </tbody>
</table>

</div>

<%= render "deleteCustomerModal" %>
